<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CrustProductionViewer_MAUI.Views.ScanPage"
             Title="Сканирование памяти">

    <Grid RowDefinitions="Auto,*" Padding="20">
        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Label Text="Сканирование памяти игры"
                   Style="{StaticResource Header}"
                   HorizontalOptions="Center"
                   Margin="0,0,0,10"/>

            <Frame BorderColor="{DynamicResource Primary}" 
                   CornerRadius="8" 
                   HasShadow="True"
                   Padding="15"
                   Margin="0,0,0,20">
                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="15">
                    <Label x:Name="ConnectionStatusLabel" 
                           Grid.Column="0"
                           Text="Процесс The Crust не найден"
                           FontSize="16"
                           VerticalOptions="Center"
                           TextColor="{DynamicResource Danger}"/>

                    <Button x:Name="ConnectButton"
                            Grid.Column="1"
                            Text="Подключиться"
                            Clicked="OnConnectClicked"
                            VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <Button x:Name="ScanButton"
                    Text="Сканировать память"
                    IsEnabled="False"
                    Clicked="OnScanClicked"
                    HorizontalOptions="Center"
                    Margin="0,0,0,10"/>

            <Label x:Name="ScanStatusLabel"
                   Text="Для начала сканирования подключитесь к игре"
                   HorizontalOptions="Center"
                   TextColor="{DynamicResource Secondary}"
                   FontSize="14"/>
        </VerticalStackLayout>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="15" Padding="0,20,0,0">
                <Label Text="Результаты сканирования"
                       Style="{StaticResource Subheader}"
                       Margin="0,0,0,10"/>

                <!-- Здесь будут отображаться результаты сканирования -->
                <Label x:Name="ResultsLabel"
                       Text="Нет данных. Выполните сканирование."
                       TextColor="{DynamicResource Secondary}"/>

                <ActivityIndicator x:Name="ScanningIndicator"
                                   IsRunning="False"
                                   IsVisible="False"
                                   HeightRequest="50"
                                   WidthRequest="50"
                                   Margin="0,20,0,0"/>

                <VerticalStackLayout x:Name="ResourcesStack"
                                     IsVisible="False"
                                     Spacing="10">
                    <!-- Здесь будут динамически добавляться элементы для ресурсов -->
                </VerticalStackLayout>

                <VerticalStackLayout x:Name="BuildingsStack"
                                     IsVisible="False"
                                     Spacing="10">
                    <!-- Здесь будут динамически добавляться элементы для зданий -->
                </VerticalStackLayout>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
