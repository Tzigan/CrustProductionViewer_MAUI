<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CrustProductionViewer_MAUI.Views.ScanPage"
             Title="Сканирование памяти">

    <Grid RowDefinitions="Auto,*,Auto" 
          Padding="20"
          RowSpacing="15">

        <!-- Верхняя часть страницы: Статус подключения -->
        <Border StrokeShape="RoundRectangle 8"
                Stroke="{AppThemeBinding Light=#512BD4, Dark=#7B5FF5}"
                StrokeThickness="1"
                Padding="15"
                Grid.Row="0">
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="15">
                <VerticalStackLayout Grid.Column="0" Spacing="5">
                    <Label x:Name="ConnectionStatusLabel" 
                           Text="Статус подключения: неизвестно"
                           FontSize="16"
                           VerticalOptions="Center" />

                    <Label x:Name="ScanStatusLabel"
                           Text="Статус сканирования"
                           FontSize="14"
                           TextColor="Gray"
                           VerticalOptions="Center" />
                </VerticalStackLayout>

                <Button x:Name="ConnectButton"
                        Grid.Column="1"
                        Text="Подключиться"
                        Clicked="OnConnectClicked"
                        VerticalOptions="Center" />
            </Grid>
        </Border>

        <!-- Средняя часть страницы: Результаты и контент -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20" Padding="0,10">
                <!-- Индикатор сканирования -->
                <ActivityIndicator x:Name="ScanningIndicator"
                                  IsRunning="False"
                                  IsVisible="False"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>

                <!-- Метка результатов сканирования -->
                <Label x:Name="ResultsLabel"
                       Text="Выполните сканирование, чтобы увидеть результаты."
                       IsVisible="True"
                       HorizontalOptions="Center" />

                <!-- Контейнер для отображения ресурсов -->
                <VerticalStackLayout x:Name="ResourcesStack" 
                                    IsVisible="False"
                                    Spacing="5" />

                <!-- Контейнер для отображения зданий -->
                <VerticalStackLayout x:Name="BuildingsStack" 
                                    IsVisible="False"
                                    Spacing="5" />
            </VerticalStackLayout>
        </ScrollView>

        <!-- Нижняя часть страницы: Кнопка сканирования -->
        <Button x:Name="ScanButton"
                Text="Сканировать память"
                IsEnabled="False"
                Clicked="OnScanClicked"
                Grid.Row="2"/>
    </Grid>
</ContentPage>
